# コーディング規約について

* goは標準のgofmtを使って機械的なコード整形をサポートしています。
* go本体の実装コードで作成されたコードレビューコメントが公開されています。
* これらを厳密に守る必要はないですが、コードスタイルに悩んだ時の参考にできます。

https://qiita.com/knsh14/items/8b73b31822c109d4c497


以下にいくつか重要なコードスタイルをピックアップします。  
(どれか1つくらいの説明、もしくは説明なしでいいと思います)

## 1. エラーハンドリングでpanicを使うのを止めましょう

組み込みのpanic関数は、ランタイムエラーでプログラムを終了させる事ができます。  

プログラムはできる限り続行できる事がベストです。  
panicは本来予期していなかった自体に起こるエラーですので、意図して起こす必要がありません。  


1. 実行時のエラーハンドリングは返り値でerrorを返す実装にする
2. ``err != nil``をチェックし、``log.Fatal(err)``でハンドリングする


## 2. エラーハンドリングのインデント

1. goではエラーハンドリングによる分岐が多く発生します
2. 分岐によるインデントが最小になるようにしましょう

Bad code  

```go
if err != nil {
	// Error
} else {
	// Success
}
```

Good code  

```go
if err != nil {
	// Error
	return
}

// Success
```

## 3. 頭字語の統一

1. 複数単語のイニシャルを取ったような頭字語では、全てを大文字、または小文字で書くように統一します。

Bad code  

```
var api Api
var userId int
var httpHandler HttpHandler
```

```
var api API
var userID int
var httpHandler HTTPHandler
```

## 4. テスト失敗時のメッセージ

* なにが悪かったのか
* どんな入力があったか
* 実際にどんな値が来たのか
* どんな値が来ることを期待していたのか

## 5. エラーハンドリングでは返り値でerrorを戻すようにしましょう

1. 結果が-1だったら、結果がnilだったら、としてはいけません。
2. goは複数の戻り値をサポートしているので、errorやboolを返す実装をしましょう
3. 結果の成功、失敗は返り値の最後に位置させるのが慣習です



